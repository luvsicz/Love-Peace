(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d5f169f"],{"5b1c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-tag",{attrs:{size:"medium"}},[t._v("请选择部门:")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:t.initTable},model:{value:t.depId,callback:function(e){t.depId=e},expression:"depId"}},t._l(this.deps,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("div",{staticStyle:{"margin-left":"10px"}},[a("el-button",{staticStyle:{"margin-right":"0px"},attrs:{icon:"el-icon-download",size:"mini",disabled:this.depSalary.length<=0,type:"primary"},on:{click:t.exportXls}},[t._v("导出当前部门工资表\n      ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.depSalary,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"部门名称"}},[a("el-table-column",{attrs:{label:"员工姓名",prop:"name",width:"120"}}),a("el-table-column",{attrs:{label:"基本工资",prop:"salary.basicSalary",width:"120"}}),a("el-table-column",{attrs:{label:"员工奖金",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.adjustSalary?e.row.adjustSalary.amount:0))]}}])}),a("el-table-column",{attrs:{label:"部门奖金",prop:"salary.bonus",width:"120"}}),a("el-table-column",{attrs:{label:"午餐补助",prop:"salary.lunchSalary",width:"120"}}),a("el-table-column",{attrs:{label:"交通补助",prop:"salary.trafficSalary",width:"120"}}),a("el-table-column",{attrs:{label:"养老金基数",prop:"salary.pensionBase",width:"120"}}),a("el-table-column",{attrs:{label:"养老金比率",prop:"salary.pensionPer",width:"120"}}),a("el-table-column",{attrs:{label:"医疗保险基数",prop:"salary.medicalBase",width:"120"}}),a("el-table-column",{attrs:{label:"养老保险比率",prop:"salary.medicalPer",width:"120"}}),a("el-table-column",{attrs:{label:"公积金基数",prop:"salary.accumulationFundBase",width:"120"}}),a("el-table-column",{attrs:{label:"公积金比率",prop:"salary.accumulationFundPer",width:"120"}}),a("el-table-column",{attrs:{label:"配置账套名称",prop:"salary.name",width:"120"}}),a("el-table-column",{attrs:{label:"应发工资(未算入奖金)",prop:"salary.allSalary",width:"120"}}),a("el-table-column",{attrs:{label:"应发工资(算入奖金)",prop:"salaryWithBonus",width:"120"}})],1)],1),a("div",{staticStyle:{"margin-right":"20px",display:"flex","justify-content":"center"}},[a("el-pagination",{attrs:{"page-size":1,total:t.total,"current-page":t.page,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.currentPageChanged,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.sizeChanged}})],1)],1)},l=[],n={data:function(){return{loading:!0,depId:"",deps:[],depSalary:[],page:1,size:10,total:0}},methods:{initTable:function(){var t=this,e="/sal/table/?page="+this.page+"&size="+this.size+"&depId="+this.depId;""!==this.depId?(this.loading=!0,this.getRequest(e).then((function(e){e&&(t.total=e.total,t.depSalary=e.data,t.loading=!1)}))):this.loading=!1},exportXls:function(){var t="/sal/table/export?depId="+this.depId;window.open(t,"_parent")},currentPageChanged:function(t){this.page=t,this.initTable()},sizeChanged:function(t){this.size=t,this.initTable()}},mounted:function(){var t=this;window.sessionStorage.getItem("depList")||this.getRequest("/dep/list").then((function(e){e&&(t.deps=e,window.sessionStorage.setItem("depList",JSON.stringify(e)))})),this.deps=JSON.parse(window.sessionStorage.getItem("depList")),this.initTable()}},s=n,r=a("2877"),o=Object(r["a"])(s,i,l,!1,null,null,null);e["default"]=o.exports},"720a":function(t,e,a){"use strict";var i=a("8ece"),l=a.n(i);l.a},"8ece":function(t,e,a){},c8b5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","padding-left":"0px"}},[a("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:t.showAddSalaryView}},[t._v("添加工资账套\n    ")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini",type:"success"},on:{click:t.initSalaries}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.salaries,border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{width:"120",prop:"name",label:"账套名称"}}),a("el-table-column",{attrs:{width:"70",prop:"basicSalary",label:"基本工资"}}),a("el-table-column",{attrs:{width:"70",prop:"trafficSalary",label:"交通补助"}}),a("el-table-column",{attrs:{width:"70",prop:"lunchSalary",label:"午餐补助"}}),a("el-table-column",{attrs:{width:"70",prop:"bonus",label:"奖金"}}),a("el-table-column",{attrs:{width:"100",prop:"createDate",label:"启用时间"}}),a("el-table-column",{attrs:{label:"养老金",align:"center"}},[a("el-table-column",{attrs:{width:"70",prop:"pensionPer",label:"比率"}}),a("el-table-column",{attrs:{width:"70",prop:"pensionBase",label:"基数"}})],1),a("el-table-column",{attrs:{label:"医疗保险",align:"center"}},[a("el-table-column",{attrs:{width:"70",prop:"medicalPer",label:"比率"}}),a("el-table-column",{attrs:{width:"70",prop:"medicalBase",label:"基数"}})],1),a("el-table-column",{attrs:{label:"公积金",align:"center"}},[a("el-table-column",{attrs:{width:"70",prop:"accumulationFundPer",label:"比率"}}),a("el-table-column",{attrs:{width:"70",prop:"accumulationFundBase",label:"基数"}})],1),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.showEditSalaryView(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteSalary(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"space-between"}},[a("el-button",{attrs:{disabled:t.multipleSelection.length<=0,round:"",size:"mini",type:"danger"},on:{click:t.multipleDelete}},[t._v("批量删除\n    ")])],1),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around","align-items":"center"}},[a("el-steps",{attrs:{direction:"vertical",active:t.activeItemIndex}},t._l(t.salaryItemName,(function(t,e){return a("el-step",{key:e,attrs:{title:t}})})),1),t._l(t.salary,(function(e,i,l){return a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.activeItemIndex===l,expression:"activeItemIndex===index"}],key:l,staticStyle:{width:"200px"},attrs:{placeholder:"请输入"+t.salaryItemName[l]+"..."},model:{value:t.salary[i],callback:function(e){t.$set(t.salary,i,e)},expression:"salary[title]"}})}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.preStep}},[t._v(t._s(10===t.activeItemIndex?"取消":"上一步"))]),a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextStep(e)}}},[t._v(t._s(10===t.activeItemIndex?"完成":"下一步"))])],1)])],1)},l=[],n=(a("7f7f"),a("ac6a"),{name:"SalSob",data:function(){return{dialogVisible:!1,loading:!0,multipleSelection:[],dialogTitle:"添加工资账套",salaries:[],activeItemIndex:0,salaryItemName:["基本工资","交通补助","午餐补助","奖金","养老金比率","养老金基数","医疗保险比率","医疗保险基数","公积金比率","公积金基数","账套名称"],salary:{basicSalary:0,trafficSalary:0,lunchSalary:0,bonus:0,pensionPer:0,pensionBase:0,medicalPer:0,medicalBase:0,accumulationFundPer:0,accumulationFundBase:0,name:""}}},mounted:function(){this.initSalaries()},methods:{handleSelectionChange:function(t){this.multipleSelection=t},multipleDelete:function(){var t="";this.multipleSelection.forEach((function(e){t+=e.id+","})),this.deleteSalaries(t)},showEditSalaryView:function(t){this.dialogTitle="修改工资账套",this.dialogVisible=!0,this.salary.basicSalary=t.basicSalary,this.salary.trafficSalary=t.trafficSalary,this.salary.lunchSalary=t.lunchSalary,this.salary.bonus=t.bonus,this.salary.pensionPer=t.pensionPer,this.salary.pensionBase=t.pensionBase,this.salary.medicalPer=t.medicalPer,this.salary.medicalBase=t.medicalBase,this.salary.accumulationFundPer=t.accumulationFundPer,this.salary.accumulationFundBase=t.accumulationFundBase,this.salary.name=t.name,this.salary.id=t.id},deleteSalaries:function(t){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequest("/sal/sob/"+t).then((function(t){t&&200===t.status&&e.initSalaries()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},deleteSalary:function(t){var e=this;this.$confirm("此操作将删除【"+t.name+"】账套，是否继续？","提示",{cancelButtonText:"取消",confirmButtonText:"确定"}).then((function(){e.deleteRequest("/sal/sob/"+t.id).then((function(t){t&&e.initSalaries()}))})).catch((function(){e.$message.info("取消删除!")}))},preStep:function(){0!==this.activeItemIndex&&(10!==this.activeItemIndex?this.activeItemIndex--:this.dialogVisible=!1)},nextStep:function(){var t=this;10!==this.activeItemIndex?this.activeItemIndex++:this.salary.id?this.putRequest("/sal/sob/",this.salary).then((function(e){e&&(t.initSalaries(),t.dialogVisible=!1)})):this.postRequest("/sal/sob/",this.salary).then((function(e){e&&(t.initSalaries(),t.dialogVisible=!1)}))},showAddSalaryView:function(){this.salary={basicSalary:0,trafficSalary:0,lunchSalary:0,bonus:0,pensionPer:0,pensionBase:0,medicalPer:0,medicalBase:0,accumulationFundPer:0,accumulationFundBase:0,name:""},this.dialogTitle="添加工资账套",this.activeItemIndex=0,this.dialogVisible=!0},initSalaries:function(){var t=this;this.loading=!0,this.getRequest("/sal/sob/").then((function(e){e&&(t.salaries=e,t.loading=!1)}))}}}),s=n,r=a("2877"),o=Object(r["a"])(s,i,l,!1,null,"a47616e8",null);e["default"]=o.exports},dfc6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-tag",{attrs:{size:"medium"}},[t._v("请输入员工姓名:")]),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"可通过名字模糊搜索",size:"mini"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.emps,border:"",stripe:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",fixed:"",width:"120",align:"left"}}),a("el-table-column",{attrs:{prop:"workID",label:"工号",width:"120",align:"left"}}),a("el-table-column",{attrs:{prop:"email",label:"电子邮件",width:"200",align:"left"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话号码",width:"120",align:"left"}}),a("el-table-column",{attrs:{prop:"department.name",label:"所属部门",width:"120",align:"left"}}),a("el-table-column",{attrs:{label:"配置账套名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.salary?a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("table",[a("tr",[a("td",[t._v("基本工资")]),a("td",[t._v(t._s(e.row.salary.basicSalary))])]),a("tr",[a("td",[t._v("交通补助")]),a("td",[t._v(t._s(e.row.salary.trafficSalary))])]),a("tr",[a("td",[t._v("午餐补助")]),a("td",[t._v(t._s(e.row.salary.lunchSalary))])]),a("tr",[a("td",[t._v("奖金")]),a("td",[t._v(t._s(e.row.salary.bonus))])]),a("tr",[a("td",[t._v("养老金比率")]),a("td",[t._v(t._s(e.row.salary.pensionPer))])]),a("tr",[a("td",[t._v("养老金基数")]),a("td",[t._v(t._s(e.row.salary.pensionBase))])]),a("tr",[a("td",[t._v("医疗保险比率")]),a("td",[t._v(t._s(e.row.salary.medicalPer))])]),a("tr",[a("td",[t._v("医疗保险基数")]),a("td",[t._v(t._s(e.row.salary.medicalBase))])]),a("tr",[a("td",[t._v("公积金比率")]),a("td",[t._v(t._s(e.row.salary.accumulationFundPer))])]),a("tr",[a("td",[t._v("公积金基数")]),a("td",[t._v(t._s(e.row.salary.accumulationFundBase))])]),a("tr",[a("td",[t._v("启用时间")]),a("td",[t._v(t._s(e.row.salary.createDate))])])])]),a("el-tag",[t._v(t._s(e.row.salary.name))])],1):a("el-tag",[t._v("暂未设置")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"left",title:"修改工资账套",width:"200",trigger:"click"},on:{show:function(a){return t.showPop(e.row.salary)},hide:function(a){return t.hidePop(e.row)}}},[a("div",[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.currentSalary,callback:function(e){t.currentSalary=e},expression:"currentSalary"}},t._l(t.salaries,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("修改工资账套")])],1)]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)])},l=[],n={name:"SalSobCfg",data:function(){return{emps:[],total:0,currentPage:1,currentSize:10,currentSalary:null,salaries:[],loading:!0,keyword:""}},mounted:function(){this.initEmps(),this.initSalaries()},methods:{search:function(){this.page=1,this.initEmps()},sizeChange:function(t){this.currentSize=t,this.initEmps()},currentChange:function(t){this.currentPage=t,this.initEmps()},hidePop:function(t){var e=this;this.currentSalary&&this.putRequest("/sal/sobcfg/?eid="+t.id+"&sid="+this.currentSalary).then((function(t){t&&e.initEmps()}))},showPop:function(t){this.currentSalary=t?t.id:null},initSalaries:function(){var t=this;this.getRequest("/sal/sobcfg/salaries").then((function(e){e&&(t.salaries=e,t.loading=!1)}))},initEmps:function(){var t=this;this.getRequest("/sal/sobcfg/?page="+this.currentPage+"&size="+this.currentSize+"&keyword="+this.keyword).then((function(e){e&&(t.emps=e.data,t.total=e.total)}))}}},s=n,r=a("2877"),o=Object(r["a"])(s,i,l,!1,null,"3ff9254a",null);e["default"]=o.exports},e827:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","padding-left":"0px"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.addAdjustSalaryInfo}},[t._v("\n      添加奖惩记录\n    ")]),a("div",{staticStyle:{display:"inline"}},[a("el-tag",{attrs:{size:"medium"}},[t._v("请输入员工姓名:")]),a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过员工名搜索员工,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:t.keywordsChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索\n      ")])],1),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:t.loadAdjustSalaryInfo}})],1),a("div",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.adjusts,stripe:"",size:"mini"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),a("el-table-column",{attrs:{prop:"employee.name",label:"员工姓名"}}),a("el-table-column",{attrs:{label:"奖惩日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.asDate))]}}])}),a("el-table-column",{attrs:{width:"200",prop:"amount",label:"奖惩金额"}}),a("el-table-column",{attrs:{prop:"reason",label:"奖惩原因"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{label:"操作",align:"center"}},[a("el-table-column",{attrs:{label:"编辑",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑\n              ")])]}}])}),a("el-table-column",{attrs:{label:"删除",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除\n              ")])]}}])})],1)],1)],1),0!==t.adjust?a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[a("el-button",{attrs:{type:"danger",round:"",size:"mini",disabled:0===t.multipleSelection.length},on:{click:t.deleteAll}},[t._v("批量删除\n      ")]),a("el-pagination",{attrs:{background:"","page-size":t.size,"current-page":t.currentPage,layout:"total,prev, pager, next",total:t.totalCount},on:{"current-change":t.currentChange}})],1):t._e()]),a("div",{staticStyle:{"text-align":"left"}},[a("el-form",{ref:"addAdjustSalary",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:t.adjust,rules:t.rules}},[a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:t.dialogTitle,"close-on-click-modal":!1,visible:t.dialogVisible,width:"77%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",["新增奖惩"===this.dialogTitle?a("el-col",{attrs:{span:6}},[a("div",[a("el-form-item",{attrs:{label:"姓名:",prop:"eid"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"输入员工名字进行模糊搜索",placement:"top"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入员工姓名搜索","remote-method":t.remoteMethod,filterable:"",remote:""},model:{value:t.adjust.eid,callback:function(e){t.$set(t.adjust,"eid",e)},expression:"adjust.eid"}},t._l(t.emps,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)]):t._e(),a("el-col",{attrs:{span:6}},[a("div",[a("el-form-item",{attrs:{label:"奖惩日期:",prop:"asDate"}},[a("el-date-picker",{staticStyle:{width:"135px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",type:"date",placeholder:"请输入奖惩日期"},model:{value:t.adjust.asDate,callback:function(e){t.$set(t.adjust,"asDate",e)},expression:"adjust.asDate"}})],1)],1)]),a("el-col",{attrs:{span:6}},[a("div",[a("el-form-item",{attrs:{label:"奖惩原因:",prop:"reason"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入奖惩原因"},model:{value:t.adjust.reason,callback:function(e){t.$set(t.adjust,"reason",e)},expression:"adjust.reason"}})],1)],1)]),a("el-col",{attrs:{span:6}},[a("div",[a("el-form-item",{attrs:{label:"奖惩金额:",prop:"amount"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入奖惩金额"},model:{value:t.adjust.amount,callback:function(e){t.$set(t.adjust,"amount",e)},expression:"adjust.amount"}})],1)],1)])],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",[a("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入备注"},model:{value:t.adjust.remark,callback:function(e){t.$set(t.adjust,"remark",e)},expression:"adjust.remark"}})],1)],1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.cancelEidt}},[t._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.addAdjustSalary("addAdjustSalary")}}},[t._v("确 定")])],1)],1)],1)],1)])},l=[],n=(a("7f7f"),a("ac6a"),{data:function(){return{keywords:"",totalCount:-1,currentPage:1,dialogVisible:!1,dialogTitle:"",tableLoading:!1,index:0,size:10,emps:[],adjusts:[],adjust:{id:"",eid:"",asDate:"",amount:"",reason:"",remark:"",name:""},multipleSelection:[],rules:{eid:[{required:!0,message:"必填:姓名",trigger:"blur"}],asDate:[{required:!0,message:"必填:奖惩日期",trigger:"blur"}],amount:[{required:!0,message:"必填:奖惩金额",trigger:"blur"}],reason:[{required:!0,message:"必填:奖惩原因",trigger:"blur"}],remark:[{required:!0,message:"必填:备注",trigger:"blur"}]}}},methods:{addAdjustSalaryInfo:function(){this.dialogTitle="新增奖惩",this.dialogVisible=!0},keywordsChange:function(t){""===t&&this.loadAdjustSalaryInfo()},search:function(){this.currentPage=1,this.loadAdjustSalaryInfo()},remoteMethod:function(t){var e=this;""!==t&&this.getRequest("/per/emp/?size=10&name="+t).then((function(t){200===t.status&&(e.emps=t.obj.data)}))},currentChange:function(t){this.currentPage=t,this.loadAdjustSalaryInfo()},deleteAll:function(){var t=this;this.$confirm("删除["+this.multipleSelection.length+"]条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e="";t.multipleSelection.forEach((function(t){e=e+t.id+","})),t.doDelete(e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(t){this.multipleSelection=t},handleEdit:function(t,e){this.dialogTitle="编辑奖惩信息",this.dialogVisible=!0,this.adjust=e},commit:function(t,e){var a=this;this.$confirm("提交生效这条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.doCommit(e.id)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleDelete:function(t,e){var a=this;this.$confirm("删除[1]条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.doDelete(e.id)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},doCommit:function(t){var e=this;e.tableLoading=!0,this.postRequest("/sal/adjust/commit/"+t).then((function(t){if(e.tableLoading=!1,t&&200===t.status){t.data;e.loadAdjustSalaryInfo()}}))},doDelete:function(t){var e=this;e.tableLoading=!0,this.deleteRequest("/sal/adjust/"+t).then((function(t){if(e.tableLoading=!1,t&&200===t.status){t.data;e.loadAdjustSalaryInfo()}}))},loadAdjustSalaryInfo:function(){var t=this;this.tableLoading=!0;var e=this;this.getRequest("/sal/adjust/?name="+e.keywords+"&page="+this.currentPage+"&size="+this.size).then((function(a){e.tableLoading=!1,a&&200===a.status&&(e.adjusts=a.obj.data,e.totalCount=a.obj.total,0===t.adjusts.length&&(t.currentPage=1));var i=e.adjusts;i.forEach((function(t){e.emps.forEach((function(e){t.eid===e.id&&(t.name=e.name)}))})),e.adjusts=i}))},emptyAdjustSalaryInfo:function(){this.adjust={id:"",eid:"",afterDepId:"",afterJobId:"",removeDate:"",reason:"",remark:"",name:""},this.index=0},cancelEidt:function(){this.dialogVisible=!1,this.emptyAdjustSalaryInfo()},addAdjustSalary:function(t){var e=this,a=this;this.$refs[t].validate((function(t){if(!t)return!1;e.adjust.id?(e.tableLoading=!0,e.putRequest("/sal/adjust/",e.adjust).then((function(t){if(a.tableLoading=!1,t&&200===t.status){t.data;a.dialogVisible=!1,a.emptyAdjustSalaryInfo(),a.loadAdjustSalaryInfo()}}))):(e.tableLoading=!0,e.postRequest("/sal/adjust/",e.adjust).then((function(t){if(a.tableLoading=!1,t&&200===t.status){t.data;a.dialogVisible=!1,a.emptyAdjustSalaryInfo(),a.loadAdjustSalaryInfo()}})))}))},initData:function(){var t=this;t.loadAdjustSalaryInfo()}},mounted:function(){this.initData()}}),s=n,r=(a("720a"),a("2877")),o=Object(r["a"])(s,i,l,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-4d5f169f.c00f9618.js.map