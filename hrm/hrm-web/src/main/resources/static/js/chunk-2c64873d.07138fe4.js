(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c64873d"],{"2c97":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("el-tag",{attrs:{size:"medium"}},[e._v("请选择部门:")]),n("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.initTable},model:{value:e.departmentId,callback:function(t){e.departmentId=t},expression:"departmentId"}},e._l(this.deps,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{fixed:"left",label:"员工编号",prop:"workID",width:"100"}}),n("el-table-column",{attrs:{fixed:"left",label:"姓名",prop:"name",width:"100"}}),n("el-table-column",{attrs:{label:"性别",prop:"gender",width:"80"}}),n("el-table-column",{attrs:{label:"籍贯",prop:"nativePlace",width:"100"}}),n("el-table-column",{attrs:{label:"政治面貌",prop:"politicsstatus.name",width:"120"}}),n("el-table-column",{attrs:{label:"毕业院校",prop:"school",width:"200"}}),n("el-table-column",{attrs:{label:"学历",prop:"tiptopDegree",width:"70"}}),n("el-table-column",{attrs:{label:"所属部门",prop:"department.name",width:"80"}}),n("el-table-column",{attrs:{label:"职位",prop:"position.name",width:"130"}}),n("el-table-column",{attrs:{label:"职称",prop:"jobLevel.name",width:"120"}}),n("el-table-column",{attrs:{label:"电话号码",prop:"phone",width:"120"}}),n("el-table-column",{attrs:{label:"邮箱",prop:"email",width:"200"}}),n("el-table-column",{attrs:{label:"家庭住址",prop:"address",width:"220"}}),n("el-table-column",{attrs:{label:"在职状态",prop:"workState",width:"80"}}),n("el-table-column",{attrs:{label:"聘用形式",prop:"engageForm",width:"80"}}),n("el-table-column",{attrs:{label:"入职日期",prop:"beginDate",width:"100"}})],1),n("div",{staticStyle:{"margin-right":"20px",display:"flex","justify-content":"center"}},[n("el-pagination",{attrs:{"page-size":1,total:e.total,"current-page":e.page,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.currentPageChanged,"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.sizeChanged}})],1)],1)},i=[],l={data:function(){return{loading:!1,tableData:[],departmentId:"",deps:[],page:1,size:10,total:0}},methods:{initTable:function(){var e=this;""!==this.departmentId&&(this.loading=!0,this.getRequest("/per/emp/?departmentId="+this.departmentId+"&page="+this.page+"&size="+this.size).then((function(t){t&&200===t.status&&(e.tableData=t.obj.data,e.total=t.obj.total,e.loading=!1)})))},currentPageChanged:function(e){this.page=e,this.initTable()},sizeChanged:function(e){this.size=e,this.initTable()}},mounted:function(){var e=this;window.sessionStorage.getItem("depList")||this.getRequest("/dep/list").then((function(t){t&&(e.deps=t,window.sessionStorage.setItem("depList",JSON.stringify(t)))})),this.deps=JSON.parse(window.sessionStorage.getItem("depList")),this.initTable()}},o=l,r=n("2877"),s=Object(r["a"])(o,a,i,!1,null,"4c64ffde",null);t["default"]=s.exports},"7f46":function(e,t,n){"use strict";var a=n("c45c"),i=n.n(a);i.a},"8e25":function(e,t,n){var a={"./DepInfo.vue":"2c97","./DepManage.vue":"8eb6"};function i(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=l,e.exports=i,i.id="8e25"},"8eb6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"margin-top":"10px",width:"800px"}},[n("el-input",{attrs:{placeholder:"请输入部门名称进行搜索...","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"tree",attrs:{data:e.deps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"filter-node-method":e.filterNode,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return n("span",{staticClass:"custom-tree-node",staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[n("span",[e._v(e._s(a.name))]),n("span",[n("el-button",{staticClass:"depBtn",attrs:{size:"mini",type:"primary"},on:{click:function(){return e.showAddDepView(a)}}},[e._v("\n          添加部门\n        ")]),n("el-button",{staticClass:"depBtn",attrs:{size:"mini",type:"danger"},on:{click:function(){return e.deleteDep(a)}}},[e._v("\n          删除部门\n        ")])],1)])}}])}),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"添加部门",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("table",[n("tr",[n("td",[n("el-tag",[e._v("上级部门")])],1),n("td",[e._v(e._s(e.pname))])]),n("tr",[n("td",[n("el-tag",[e._v("部门名称")])],1),n("td",[n("el-input",{attrs:{placeholder:"请输入部门名称..."},model:{value:e.dep.name,callback:function(t){e.$set(e.dep,"name",t)},expression:"dep.name"}})],1)])])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doAddDep}},[e._v("确 定")])],1)])],1)])},i=[],l=(n("7f7f"),{name:"DepMana",data:function(){return{dialogVisible:!1,filterText:"",dep:{name:"",parentId:-1},pname:"",deps:[],defaultProps:{children:"children",label:"name"}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.initDeps()},methods:{initDep:function(){this.dep={name:"",parentId:-1},this.pname=""},addDep2Deps:function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.id===t.parentId)return a.children=a.children.concat(t),void(a.children.length>0&&(a.parent=!0));this.addDep2Deps(a.children,t)}},doAddDep:function(){var e=this;this.postRequest("/dep/",this.dep).then((function(t){t&&(e.addDep2Deps(e.deps,t.obj),e.dialogVisible=!1,window.sessionStorage.removeItem("deps"),e.initDep())}))},removeDepFromDeps:function(e,t,n){for(var a=0;a<t.length;a++){var i=t[a];if(i.id===n)return t.splice(a,1),void(0===t.length&&(e.parent=!1));this.removeDepFromDeps(i,i.children,n)}},deleteDep:function(e){var t=this;e.parent?this.$message.error("父部门删除失败"):this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/dep/"+e.id).then((function(n){n&&(window.sessionStorage.removeItem("deps"),t.removeDepFromDeps(null,t.deps,e.id))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},showAddDepView:function(e){this.pname=e.name,this.dep.parentId=e.id,this.dialogVisible=!0},initDeps:function(){var e=this;this.getRequest("/dep/").then((function(t){t&&(e.deps=t)}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}}}),o=l,r=(n("7f46"),n("2877")),s=Object(r["a"])(o,a,i,!1,null,null,null);t["default"]=s.exports},c45c:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2c64873d.07138fe4.js.map